unit GateFakes;

interface

uses
  janXMLparser2;

procedure FakeVkErrorCheckSub(var err: Integer; var sMsg, sCaptchaResp, sSid:
    string); overload;

procedure FakeVkErrorCheckSub(xml: TjanXMLNode2); overload;

implementation

uses
  VKClientSession;
var
  bVk14Error: boolean;

procedure FakeVkErrorCheckSub(var err: Integer; var sMsg, sCaptchaResp, sSid:
    string);
begin
  if bVk14Error then
  begin
    sCaptchaResp:='';
    sSid:='123';
    err:=14;
    sMsg:='Fake EVkApi 14';
   // raise EVkApi.Create(14, 'Fake EVkApi 14');
  end;
end;

procedure FakeVkErrorCheckSub(xml: TjanXMLNode2);
begin
   if not bVk14Error then
    exit;

   xml.Name:='error';
   //xml.text:='<error_code>14<error_code/><sid>123</sid>';
   xml.addChildByName('error_code').text:='14';
   xml.addChildByName('captcha_sid').text:='5432';
   xml.addChildByName('captcha_img').text:='http://12345';
   xml.addChildByName('error_msg').text:='Fake EVkApi 14';
end;

initialization
  bVk14Error:=true;

end.
